<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Application Cache</title>

    <meta name="description" content="Application Cache slide">
    <meta name="author" content="mohwa">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css" type='text/css'>
    <link rel="stylesheet" href="css/theme/adobe-theme.css?122" type='text/css'>
    <!--<link rel="stylesheet" href="css/fullscreen-img.css">-->

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!--<link rel="stylesheet" href="lib/css/atelier-seaside.light.css">-->
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
        document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <style type="text/css">
        .tomato { color:#ff6347; }
    </style>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <!--<div class="support-warning intro">-->
                <!--Application Cache-->
                <!--<a href="https://github.com/oslego/fowd-london-2014">Read the instructions</a> on how to setup that environment and get the full experience.-->
            <!--</div>-->

            <h1>Application Cache</h1>
            <!--<p>-->
                <!--<a href="http://razvancaliman.com">Razvan Caliman</a> / <a href="http://twitter.com/razvancaliman">@razvancaliman</a>-->
            <!--</p>-->
        </section>
        <!--<section data-state='intro'>-->
            <!--<p class="desc">Adobe <span class="no-break">Web Platform</span> Team</p>-->
        <!--</section>-->
        <section style="text-align:left">
            <p><span class="tomato">Offline browsing</span>: users can navigate a site even when they are <span class="tomato">offline</span>.</p>
            <br>
            <p class="fragment" data-fragment-index="1"><span class="tomato">Speed</span>: <span class="tomato">cached</span> resources are local, and therefore load faster.</p>
            <br>
            <p class="fragment" data-fragment-index="2"><span class="tomato">Reduced server load</span>: the browser only downloads resources that have <span class="tomato">changed</span>(update) from the server.</p>
            <br>
            <!--<p class="fragment" data-fragment-index="3">- Resilience - if your site goes down for "maintenance" (as in, someone accidentally breaks everything), your users will get the offline experience</p>-->
            <!--<p class="fragment" data-fragment-index="3">-->
                <!--<div class="support-warning intro">-->
                    <!--<a href="http://www.html5rocks.com/en/tutorials/appcache/beginner/?redirect_from_locale=ko">http://www.html5rocks.com/en/tutorials/appcache/beginner/?redirect_from_locale=ko</a>-->
                <!--</div>-->
            <!--</p>-->

        </section>
        <section>
            <h3>browser support?</h3>
            <span><img src="img/support.jpg"></span>
        </section>
        <section>
            <h3>How To Used?</h3>
        </section>

        <section>
            <h3>manifest file</h3>
        </section>

        <section>
            <pre class="hljs" style="text-align:center">
                <code data-trim contenteditable class="tag">
                    &lt;html manifest="cache.appcache"&gt;...&lt;/html&gt;
                </code>
            </pre>
            <!--<p class="fragment" data-fragment-index="3">Appears last</p>-->
            <!--<p class="fragment" data-fragment-index="1">Appears first</p>-->
            <!--<p class="fragment" data-fragment-index="2">Appears second</p>-->
        </section>
        <section>
            <h4>add mime-type(in apache)</h4>
            <pre class="hljs" style="text-align:center">
                <code data-trim contenteditable class="comment">
                    AddType text/cache-manifest .appcache
                </code>
            </pre>
        </section>
        <section>
            <h4>Structure of a manifest file</h4>

            <pre>
                <code>
                CACHE MANIFEST

                NETWORK:

                FALLBACK:
                </code>
            </pre>
        </section>
        <section>
            <h4>CACHE Section</h4>

            <pre>
                <code>
                CACHE MANIFEST
                # 2010-06-18:v3

                # Explicitly cached entries
                index.html
                css/style.css
                </code>
            </pre>
            <span class="no-break">첫 로드 후 MANIFEST 파일에 정의된 리소스를 캐시에 저장한다.</span>
            <br><br>
            <span class="no-break" style="font-size:25px">@ MANIFEST 파일이 할당된 HTML 파일은 무조건 <span class="tomato">캐시</span>된다.</span>
        </section>
        <section>
            <h4>NETWORK Section</h4>

            <pre>
                <code>
    # All other resources(e.g. sites)
    #require the user to be online.
    NETWORK:
    #(You can white-list specific URLs here,
    #or simply "*")
    *
                </code>
            </pre>
            <span class="no-break">NETWORK SECTION 에 나열된 리소스들은 무조건<br><br>서버 연결을 통해서만 가져오게된다.(<span class="tomato">NO CACHED</span>)</span>
        </section>
        <section>
            <h4>NETWORK Section</h4>

            <pre>
                <code>
    CACHE MANIFEST
    index.html
    css/style.css

    NETWORK:
                </code>
            </pre>
            <span class="no-break" style="font-size:40px">만약, NETWORK SECTION 에 아무것도 정의되지 않았다면?</span>
            <br><br><br>
            <span class="tomato">일부 캐시된 리소스만을 가져오게 된다.</span>
            <!--<div class="intro"><br><span style="font-size:20px">(이 말은 캐시된 리소스 이외의 모든 리소스들을 가져오지 못하게된다는 말과 같다)</span></div>-->
        </section>
        <section>
            <h4>FALLBACK Section</h4>

            <pre>
                <code>
    # offline.html will be displayed
    #if the user is offline
    FALLBACK:
    /x.jpg /y.jpg
                </code>
            </pre>
            <span class="no-break">만약 서버를 연결을 통해 리소스를 가져오지 못할 경우,<br><br><span class="tomato">FALLBACK</span>(대안)으로 사용될 리소스를 정의한다.</span>
        </section>
        <section>
            <h4>FALLBACK Section</h4>

            <pre>
                <code>
    # offline.html will be displayed
    #if the user is offline
    FALLBACK:
    /x.jpg /y.jpg
                </code>
            </pre>
            <span class="no-break">실제 테스트 시에는 x.jpg 파일의 <span class="tomato">엑세스 실패 여부</span>와 관계없이,<br><br> y.jpg 파일을 무조건 <span class="tomato">캐시</span>한다.</span>

        </section>
        <section>
            <h3><span class="tomato">캐시</span> 업데이트 시점은?</h3>
        </section>
        <section>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="0">1. 브라우저를 통한 캐시 <span class="tomato">삭제</span> 후.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1">2. MANIFEST 파일이 <span class="tomato">수정</span>된 후.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="3">3. 자바스크립트 API를 통해 명시적으로 .update() 메서드가 <span class="tomato">호출</span>된 후.(window.applicationCache.<span class="tomato">update()</span>)</p>

        </section>

        <section>
            <h3>application cache event</h3>
        </section>
        <section>
            <div class="no-break">각 이벤트들의 <span class="tomato">시점</span>을 전부 처리할 수 있는 cached, checking, downloading,<br> error 등의 많은 이벤트가 존재한다.</div>
            <br>
            <a href="http://www.bennadel.com/blog/2029-using-html5-offline-application-cache-events-in-javascript.htm">http://www.bennadel.com/blog/2029-using-html5-offline-application-cache-events-in-javascript.htm</a>
        </section>
        <section>
            <span class="no-break">여러 이벤트 중 기본적으로 따로 처리해야할 이벤트</span>
            <pre class="hljs">
                <code class="javascript" style="font-size:18px">
    // MANIFEST 파일에 정의된 각 리소스에 대한 Progress 이벤트가 발생한다.
    var downloadedIndex = 1;
    window.applicationCache.addEventListener('progress', function(e){

        var total = e.total,
            loaded = e.loaded,
            lengthComputable = e.lengthComputable,
            clipboardData = e.clipboardData,
            percent = total > 0 ? Math.round(((loaded / total) * 100)) : 0;

        console.log((downloadedIndex++) + ',' + percent);

    }, false);
                </code>
            </pre>
        </section>
        <section>
            <span class="no-break">여러 이벤트 중 기본적으로 따로 처리해야할 이벤트</span>
            <pre class="hljs">
                <code class="javascript" style="font-size:20px">
    window.applicationCache.addEventListener('error', function(e){

        var url = e.url,
            message = e.message,
            status = e.status;

        console.log(url + ',' + message + ',' + status);

    }, false);
                </code>
            </pre>
        </section>
        <section>
            <h3>이벤트 적용 시 주의사항</h3>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1">각 이벤트가 발생하는 <span class="tomato">시점</span>을 최대한 많이 테스트 후 필요한 <span class="tomato">로직</span>을 설계해야한다.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="2">지원 가능한 모든 디바이스를 <span class="tomato">테스트</span>해보는것이 좋다.(<span class="tomato">디바이스에 따라 처리 방식이 달라질 수 있기 때문이다</span>)</p>
        </section>

        <section>
            <h3>그럼 <span class="tomato">왜?</span> 사용했나?</h3>
        </section>

        <section data-background="http://www.justincarmony.com/slides/salt-intro/gifs/boss.gif" style="top: -142px; display: block;">
            <h3>게임 테이블에 <span class="tomato">예약</span> 기능 만들어놔!!</h3>
            <!--<span><img src="http://www.justincarmony.com/slides/salt-intro/gifs/boss.gif" width="100%" height="600"></span>-->
        </section>

        <section data-background="http://www.justincarmony.com/slides/salt-intro/gifs/angry-panda.gif" style="top: -142px; display: block;">
            <h3><span class="tomato">Side Effect</span> * 100,000,000...</h3>
        </section>

        <section data-background="http://www.justincarmony.com/slides/salt-intro/gifs/fire.gif" style="top: -142px; display: block;">
            <h3>일단 <span class="tomato">방법</span>을 찾아보자!!</h3>
        </section>

        <section data-background="http://www.justincarmony.com/slides/salt-intro/gifs/team.gif" style="top: -142px; display: block;">
            <h3><span class="tomato">HTML5</span>? APPLICATION CACHE <span class="tomato">API</span>?</h3>
        </section>

        <section>
            <h3>테스트 <span class="tomato">결과</span>는?</h3>
        </section>

        <section>
            <h3>1차 테스트 <span class="tomato">결과</span>.......;;</h3>
            <span><img src="img/speed1.jpg"></span>
        </section>

        <section data-background="img/11.gif" style="top: -142px; display: block;">
            <h3>전체 파일 용량이 <span class="tomato">2MB</span>인데?</h3>
            <!--<span><img src="img/11.gif" width="100%" height="500"></span>-->
        </section>

        <section data-background="https://s3.amazonaws.com/media-p.slid.es/uploads/contra/images/65997/m9WRR1h.jpg" style="top: -142px; display: block;">
            <h3>RELAX...</h3>
        </section>

        <section>
            <h3>최종 테스트 <span class="tomato">결과</span></h3>
            <span><img src="img/speed2.jpg" width="650" height="400"></span>
        </section>

        <section>
            <h3>before</h3>
            <br>
            <iframe width="100%" height="500" src="//www.youtube.com/embed/pd-pdUx3hpI" frameborder="0" allowfullscreen></iframe>
        </section>

        <section>
            <h3>after</h3>
            <br>
            <iframe width="100%" height="500" src="//www.youtube.com/embed/OZDMruCcCPk" frameborder="0" allowfullscreen></iframe>
        </section>

        <section data-background="img/22.gif" style="top: -142px; display: block;">
            <h3><span class="tomato">APPLICATION CACHE</span><br><br>쓸만하다.</h3>
        </section>

        <section>
            <h3>ISSUES</h3>
        </section>

        <section>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1">용량은 크게 중요하지 않다. 리소스에 대한 <span class="tomato">요청</span> 수를 줄여라.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="2"><span class="tomato">ANDROID</span> 가 <span class="tomato">IOS</span>보다 좋을때가 있더라.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="3">하지만 IOS 의 경우 <span class="tomato">10MB</span>(IOS 6 ~ 7+) 이상 리소스 요청 시 사용자에게 경고창(?)을 보여주게 된다.</p>
            <br><br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="3"><a href="http://suburbia.org.uk/blog/2014/01/15/124659.html">http://suburbia.org.uk/blog/2014/01/15/124659.html</a></p>
        </section>

        <section data-background="img/alert.jpg" style="top: -142px; display: block;"></section>

        <section>
            <h3>MANIFEST 파일 <span class="tomato">동적</span> 변경</h3>
        </section>

        <section>
            <h3><span class="tomato">ASSET</span> 을 각종 디바이스 <span class="tomato">GRADE</span>에<br><br> 따라 분기 시켜야 <span class="tomato">ISSUE</span>가 생김</h3>
        </section>

        <section data-background="img/11.gif" style="top: -142px; display: block;">
            <h3>서버 페이지를 사용할 수 없다고?</h3>
        </section>

        <section>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1">MANIFEST 파일은 <span class="tomato">CLIENT</span> SIDE 상에서 동적 제어가 불가능하다.</p>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1"><a href="http://grinninggecko.com/2010/12/14/dynamic-cache-manifest/">http://grinninggecko.com/2010/12/14/dynamic-cache-manifest/</a></p>
            <br><br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="2"><span class="tomato">REDIRECTION</span>(302) 을 통해 각기 다른 버전(low/high)의 MANIFEST 파일이 포함된 HTML로 이동시켜 해결하려함.</p>
        </section>

        <section data-background="img/11.gif" style="top: -142px; display: block;">
            <h3><span class="tomato">REDIRECTION</span> 시 특정 디바이스에서 <br><br><span class="tomato">"checking"</span> 이벤트가 잡히지 않는다</h3>
        </section>

        <section data-background="http://markdalgleish.github.io/presentation-build-wars-gulp-vs-grunt/images/gif/slowclap.gif" style="top: -142px; display: block;">
            <h3>DELETE</h3>
        </section>

        <section>
            <h3>ios8 <span class="tomato">beta</span>5 <span class="tomato">BUGS</span></h3>
        </section>

        <section>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="1">리소스 캐시 후 새로고침 시 <span class="tomato">"updateready"</span> or <span class="tomato">"noupdate"</span> 이벤트가 발생하지 않는 <span class="tomato">버그</span>가 존재한다.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="2">하지만 <span class="tomato">REDIRECTION</span>(302) 시에는 정상적으로 동작한다.</p>
            <br>
            <p class="fragment roll-in" style="text-align:left" data-fragment-index="3">즉 <span class="tomato">IOS8</span> 의 경우에는 새로고침이 아닌 <span class="tomato">REDIRECTION</span>(302)을 발생시켜 해결함.</p>
        </section>

        <section>
            <h3>Questions?</h3>
        </section>

        <section>
            <h3>Reference</h3>
            <br>
            <ul style="font-size:20px">
                <li><a href="http://www.html5rocks.com/en/tutorials/appcache/beginner/?redirect_from_locale=ko">http://www.html5rocks.com/en/tutorials/appcache/beginner/?redirect_from_locale=ko</a></li>
                <li><a href="https://github.com/zziuni/HTML5Rocks_kr/tree/master/tutorials/appcache/beginner">https://github.com/zziuni/HTML5Rocks_kr/tree/master/tutorials/appcache/beginner(번역)</a></li>
                <li><a href="http://msdn.microsoft.com/ko-kr/library/ie/hh673545(v=vs.85).aspx">http://msdn.microsoft.com/ko-kr/library/ie/hh673545(v=vs.85).aspx</a></li>
            </ul>
        </section>

    </div>
    <div class="state-background"></div>
</div>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    document.addEventListener("DOMContentLoaded", init, false);

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    function init(){

        var cblocks = document.querySelectorAll("pre code");

        if(cblocks.length) {
            for(var i=0, len=cblocks.length; i<len; i++) {
                var dom = cblocks[i];
                var html = dom.innerHTML;
                html = html.replace(/</g,"&lt;").replace(/>/g,"&gt;");
                dom.innerHTML = html;
            }
        }
    }

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        rollingLinks:true,
        slideNumber: false,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none
        backgroundTransition: 'slide',

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },

            // Interpret Markdown in <section> elements
            { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

            // Syntax highlight for <code> elements
            { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
//            { src: 'lib/js/fullscreen-img.js'},
            // Zoom in and out with Alt+click
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },


            // Speaker notes
//            { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },

            // Remote control your reveal.js presentation using a touch device
//            { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } },

            // MathJax
//            { src: 'plugin/math/math.js', async: true },
//            { src: 'socket.io/socket.io.js', async: true },
//            { src: 'plugin/notes-server/client.js', async: true }
        ]
    });

</script>
</body>
</html>